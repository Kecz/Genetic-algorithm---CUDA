clear;
%Osobniki na CPU
%plik = csvread("Path to your project");

%Osobniki na GPU
plik = csvread("Path to your project");

ile_osobnikow = plik(1,1);
Ktora_funkcja = plik(1,2);
Wyswietl_2D = 1;
Wyswietl_3Din2D = 1;
Wyswietl_3D = 1;
Wyswietl_opt = 1;
podzialka = 10;
co_ile_klatkowac = 0.2;

X_min = plik(size(plik, 1)-1,1);
X_max = plik(size(plik, 1)-1,2);
Y_min = plik(size(plik, 1),1);
Y_max = plik(size(plik, 1),2);

Ile_generacji = ((size(plik,1)-4)/ile_osobnikow);

string = ["Ilosc osobnikow = ", ile_osobnikow, "Ilosc generacji = ",  Ile_generacji, "Funkcja nr. ", Ktora_funkcja];
disp(string);

if(Wyswietl_2D == 1)
    figure('Name', 'Osobniki-2D');
    pause(1);
    for i = 0:(Ile_generacji-1)
        x_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 1);
        y_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 2);
        plot(x_osob, y_osob, 'ro')
        xlim([X_min X_max])
        ylim([Y_min Y_max])
        pause(co_ile_klatkowac)
    end
end

if(Wyswietl_3Din2D == 1)
    figure('Name', 'Osobniki-3Din2D');
    [X,Y] = meshgrid(X_min:podzialka:X_max, Y_min:podzialka:Y_max);

    if(Ktora_funkcja==1)
        Z = (sin(X) + cos(Y));
    elseif (Ktora_funkcja==2)
        Z = (X.^2 + Y.^2);
    elseif(Ktora_funkcja==3)
        Z = (Y.*sin(X) - X.*cos(Y));
    elseif(Ktora_funkcja==4)
        Z = (sin(X+Y) + (X-Y).^2 - 1.5*X + 2.5*Y + 1);
    elseif(Ktora_funkcja==5)
        Z = -(Y+47).*sin(sqrt(abs((X./2) + (Y+47)))) - X.*sin(sqrt(abs(X-(Y+47))));
    elseif(Ktora_funkcja==6)
        Z = 418.9829*2 - (X.*sin(sqrt(abs(X))) + Y.*sin(sqrt(abs(Y))));
    end

    pause(1);
    
     for i = 0:(Ile_generacji-1)
        surf(X, Y, Z, 'edgecolor', 'none');
        view(2)
        hold on
        x_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 1);
        y_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 2);

        if(Ktora_funkcja ==1)
            z_osob = (sin(x_osob) + cos(y_osob));
        elseif(Ktora_funkcja == 2)
            z_osob = (x_osob.^2 +y_osob.^2);
        elseif(Ktora_funkcja ==3)
            z_osob = (y_osob.*sin(x_osob) - x_osob.*cos(y_osob));
         elseif(Ktora_funkcja==4)
            z_osob = (sin(x_osob+y_osob) + (x_osob-y_osob).^2 - 1.5*x_osob + 2.5*y_osob + 1);
        elseif(Ktora_funkcja==5)
            z_osob = -(y_osob+47).*sin(sqrt(abs((x_osob./2) + (y_osob+47)))) - x_osob.*sin(sqrt(abs(x_osob-(y_osob+47))));
        elseif(Ktora_funkcja==6)
            z_osob = 418.9829*2 - (x_osob.*sin(sqrt(abs(x_osob))) + y_osob.*sin(sqrt(abs(y_osob))));
        end

        plot3(x_osob, y_osob, z_osob, 'rx')
        xlim([X_min X_max])
        ylim([Y_min Y_max])
        hold off
        pause(co_ile_klatkowac)
    end
    
    if(Wyswietl_opt==1)
        surf(X, Y, Z, 'edgecolor', 'none');
        view(2)
        hold on
        x_opt = plik(size(plik,1)-2,1);
        y_opt = plik(size(plik,1)-2,2);

        if(Ktora_funkcja ==1)
                z_opt = (sin(x_opt) + cos(y_opt));
        elseif(Ktora_funkcja == 2)
                z_opt = (x_opt.^2 +y_opt.^2);
        elseif(Ktora_funkcja ==3)
                z_opt = (y_opt.*sin(x_opt) - x_opt.*cos(y_opt));
        elseif(Ktora_funkcja==4)
                z_opt = (sin(x_opt+y_opt) + (x_opt-y_opt).^2 - 1.5*x_opt + 2.5*y_opt + 1);
        elseif(Ktora_funkcja==5)
                z_opt = -(y_opt+47).*sin(sqrt(abs((x_opt./2) + (y_opt+47)))) - x_opt.*sin(sqrt(abs(x_opt-(y_opt+47))));
       elseif(Ktora_funkcja==6)
            z_opt = 418.9829*2 - (x_opt.*sin(sqrt(abs(x_opt))) + y_opt.*sin(sqrt(abs(y_opt))));
        
        end

        plot3(x_opt, y_opt, z_opt, 'w+')
        xlim([X_min X_max])
        ylim([Y_min Y_max])
        hold off
    end
end

if(Wyswietl_3D == 1)
    figure('Name', 'Osobniki-3D');
    [X,Y] = meshgrid(X_min:podzialka:X_max, Y_min:podzialka:Y_max);

    if(Ktora_funkcja==1)
        Z = (sin(X) + cos(Y));
    elseif (Ktora_funkcja==2)
        Z = (X.^2 + Y.^2);
    elseif(Ktora_funkcja==3)
        Z = (Y.*sin(X) - X.*cos(Y));
    elseif(Ktora_funkcja==4)
        Z = (sin(X+Y) + (X-Y).^2 - 1.5*X + 2.5*Y + 1);
    elseif(Ktora_funkcja==5)
        Z = -(Y+47).*sin(sqrt(abs((X./2) + (Y+47)))) - X.*sin(sqrt(abs(X-(Y+47))));
    elseif(Ktora_funkcja==6)
        Z = 418.9829*2 - (X.*sin(sqrt(abs(X))) + Y.*sin(sqrt(abs(Y))));
    end

    pause(1);
    
    for i = 0:(Ile_generacji-1)
        surf(X, Y, Z, 'edgecolor', 'none');
        hold on
        x_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 1);
        y_osob = plik(2+i*ile_osobnikow:ile_osobnikow+i*ile_osobnikow+1, 2);

        if(Ktora_funkcja ==1)
            z_osob = (sin(x_osob) + cos(y_osob));
        elseif(Ktora_funkcja == 2)
            z_osob = (x_osob.^2 +y_osob.^2);
        elseif(Ktora_funkcja ==3)
            z_osob = (y_osob.*sin(x_osob) - x_osob.*cos(y_osob));
         elseif(Ktora_funkcja==4)
            z_osob = (sin(x_osob+y_osob) + (x_osob-y_osob).^2 - 1.5*x_osob + 2.5*y_osob + 1);
       elseif(Ktora_funkcja==5)
            z_osob = -(y_osob+47).*sin(sqrt(abs((x_osob./2) + (y_osob+47)))) - x_osob.*sin(sqrt(abs(x_osob-(y_osob+47))));
       elseif(Ktora_funkcja==6)
            z_osob = 418.9829*2 - (x_osob.*sin(sqrt(abs(x_osob))) + y_osob.*sin(sqrt(abs(y_osob))));
        end

        plot3(x_osob, y_osob, z_osob, 'rx')
        xlim([X_min X_max])
        ylim([Y_min Y_max])
        hold off
        pause(co_ile_klatkowac)
    end
    
    if(Wyswietl_opt==1)
        surf(X, Y, Z, 'edgecolor', 'none');
        hold on
        x_opt = plik(size(plik,1)-2,1);
        y_opt = plik(size(plik,1)-2,2);

        if(Ktora_funkcja ==1)
                z_opt = (sin(x_opt) + cos(y_opt));
        elseif(Ktora_funkcja == 2)
                z_opt = (x_opt.^2 +y_opt.^2);
        elseif(Ktora_funkcja ==3)
                z_opt = (y_opt.*sin(x_opt) - x_opt.*cos(y_opt));
        elseif(Ktora_funkcja==4)
                z_opt = (sin(x_opt+y_opt) + (x_opt-y_opt).^2 - 1.5*x_opt + 2.5*y_opt + 1);
       elseif(Ktora_funkcja==5)
                z_opt = -(y_opt+47).*sin(sqrt(abs((x_opt./2) + (y_opt+47)))) - x_opt.*sin(sqrt(abs(x_opt-(y_opt+47))));
       elseif(Ktora_funkcja==6)
            z_opt = 418.9829*2 - (x_opt.*sin(sqrt(abs(x_opt))) + y_opt.*sin(sqrt(abs(y_opt))));
        
        end

        plot3(x_opt, y_opt, z_opt, 'w+')
        xlim([X_min X_max])
        ylim([Y_min Y_max])
        hold off
    end
end


